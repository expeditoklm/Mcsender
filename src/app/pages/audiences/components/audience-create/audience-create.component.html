<div class="user-create-form-container">
  <div class="custom-modal-overlay" (click)="cancel()"></div>
  <div class="custom-modal-content">
    <h3 class="form-title">Créer une audience</h3>
    <form nz-form [nzLayout]="'vertical'" class="user-create-form">
      <!-- Champ Nom -->
      <nz-form-item>
        <nz-form-label [nzFor]="'name'">Libellé</nz-form-label>
        <nz-form-control nzHasFeedback>
          <input nz-input id="name" [(ngModel)]="formData.name" name="name" placeholder="Entrez le libellé" required />
        </nz-form-control>
      </nz-form-item>
      <!-- Description -->
      <nz-form-item>
        <nz-form-label [nzFor]="'description'">Description</nz-form-label>
        <nz-form-control nzHasFeedback>
          <textarea nz-input id="description" [(ngModel)]="formData.description" name="description"
            placeholder="Description de l'audience"></textarea>
        </nz-form-control>
      </nz-form-item>




      <!-- Sélecteur Entreprise -->
      <nz-form-item>
        <nz-form-label [nzFor]="'companyId'">Entreprise</nz-form-label>
        <nz-form-control nzHasFeedback>
          <nz-select id="companyId" [(ngModel)]="formData.companyId" name="companyId"
            nzPlaceHolder="Choisir une entreprise" [nzLoading]="isLoading" [disabled]="isLoading || isError" required>
            <nz-option *ngFor="let company of companies || []" [nzValue]="company?.id" [nzLabel]="company.name">
            </nz-option>
          </nz-select>

          <!-- Message d'erreur -->
          <div *ngIf="isError" class="error-message">
            Erreur lors du chargement des entreprises. Veuillez réessayer plus
            tard.
          </div>
        </nz-form-control>
      </nz-form-item>

      <!-- Boutons d'action -->
      <div class="form-buttons">
        <button nz-button nzType="primary" nzBlock (click)="submitForm()">
          Enregistrer
        </button>
        <button nz-button nzType="default" nzBlock (click)="cancel()">
          Annuler
        </button>
      </div>
    </form>
  </div>
</div>
