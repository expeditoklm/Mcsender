<nz-modal 
  [nzVisible]="true" 
  [nzTitle]="'Détails de l\'utilisateur: ' + user.name" 

  [nzWidth]="800"
  class="user-details-modal"
>
  <ng-container *nzModalContent>
    <div class="bg-gray-50 rounded-lg">
      <nz-tabset 
        nzType="card" 
        class="custom-tabs"
      >
        <!-- Onglet Informations Générales -->
        <nz-tab nzTitle="Informations Générales">
          <div class="p-6">
            <div class="grid md:grid-cols-2 gap-6 bg-white rounded-lg shadow-sm p-6">
              <div class="space-y-3">
                <div class="flex items-center" style="display: flex; ">
                  <i nz-icon nzType="user" class="mr-3 text-blue-500"></i>
                  <div>
                    <strong class="text-gray-700" style=" margin-left: 10px;">Nom :</strong> 
                    <span class="text-gray-900">{{ user.name || 'Non renseigné' }}</span>
                  </div>
                </div>
                <div class="flex items-center" style="display: flex; ">
                  <i nz-icon nzType="user" class="mr-3 text-blue-500"></i>
                  <div>
                    <strong class="text-gray-700" style=" margin-left: 10px;">Nom d'utilisateur :</strong> 
                    <span class="text-gray-900">{{ user.username || 'Non renseigné' }}</span>
                  </div>
                </div>
              </div>
              
              <div class="space-y-3">
                <div class="flex items-center " style="display: flex; " >
                  <i nz-icon nzType="mail" class="mr-3 text-blue-500"></i>
                  <div>
                    <strong class="text-gray-700 "style=" margin-left: 10px;">Email :</strong> 
                    <span class="text-gray-900">{{ user.email || 'Non renseigné' }}</span>
                  </div>
                </div>
                <div class="flex items-center" style="display: flex; ">
                  <i nz-icon nzType="tags" class="mr-3 text-blue-500"></i>
                  <div>
                    <strong class="text-gray-700" style=" margin-left: 10px;">Rôle :</strong> 
                    <nz-tag 
                      [nzColor]="getRoleColor(user.role)"
                      class="font-semibold"
                    >
                      {{ user.role || 'Non défini' }}
                    </nz-tag>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </nz-tab>
        
        <!-- Onglet Informations Professionnelles -->
        <nz-tab nzTitle="Informations Professionnelles">
          <div class="p-6">
            <h3 class="text-xl font-semibold mb-4 flex items-center">
              <i nz-icon nzType="apartment" class="mr-3 text-blue-500"></i>
              Entreprises de {{ user.name }}
              <nz-spin *ngIf="isLoadingCompanies" nzSimple class="ml-3"></nz-spin>
            </h3>
            
            <!-- Liste des entreprises -->
            <div *ngIf="!isLoadingCompanies" class="space-y-4">
              <nz-card 
                *ngFor="let company of userCompanies" 
                class="hover:shadow-md transition-shadow duration-300 rounded-lg"
              >
                <div class="flex justify-between items-center">
                  <div>
                    <strong class="text-lg text-gray-800">{{ company.company.name }}</strong>
                    <p class="text-gray-500 text-sm mt-1">
                      {{ company.company.description || 'Description non renseignée' }}
                    </p>
                  </div>
                  <nz-tag 
                    [nzColor]="company.isMember ? 'success' : 'warning'"
                    class="font-semibold"
                  >
                    {{ company.isMember ? 'Membre' : 'Invité' }}
                  </nz-tag>
                </div>
              </nz-card>
              
              <!-- Message si aucune entreprise -->
              <div 
                *ngIf="userCompanies.length === 0" 
                class="text-center text-gray-500 bg-gray-100 p-6 rounded-lg"
              >
                <i nz-icon nzType="info-circle" class="mr-2 text-blue-500"></i>
                Aucune entreprise associée
              </div>
            </div>
          </div>
        </nz-tab>
      </nz-tabset>
    </div>
  </ng-container>

  <!-- Boutons du modal -->
  <div *nzModalFooter>
    <button 
      nz-button 
      nzType="default" 
      class="mr-2" 
      (click)="closeModal()"
    >
      Fermer
    </button>
  </div>
</nz-modal>