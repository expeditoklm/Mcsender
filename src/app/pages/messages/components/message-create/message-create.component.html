<div class="user-create-form-container">
  <div class="custom-modal-overlay" (click)="cancel()"></div>
  <div class="custom-modal-content">
    <h3 class="form-title">Créer un méssage </h3>
    <form nz-form [nzLayout]="'vertical'" class="user-create-form">
      <!-- Champ Nom -->
      <nz-form-item>
        <nz-form-label [nzFor]="'object'">Object</nz-form-label>
        <nz-form-control nzHasFeedback>
          <input
            nz-input  
            id="object"
            [(ngModel)]="formData.object"
            name="object"
            placeholder="Entrez l'object"
          />
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzFor]="'content'">Contenu</nz-form-label>
        <nz-form-control nzHasFeedback>
          <input
            nz-input  
            id="content"
            [(ngModel)]="formData.content"
            name="content"
            placeholder="Entrez la contenu du msg"
          />
        </nz-form-control>
      </nz-form-item>

      <!-- Sélecteur de rôle -->
      <nz-form-item>
        <nz-form-label [nzFor]="'status'">Status</nz-form-label>
        <nz-form-control nzHasFeedback>
          <nz-select
            id="status"
            [(ngModel)]="formData.status"
            name="status"
            nzPlaceHolder="Choisir un status"
            required
          >
          <select nz-select [(ngModel)]="formData.status" name="role">
            <nz-option *ngFor="let status of MsgStatus" [nzValue]="status" [nzLabel]="getStatusLabel(status)"></nz-option>
          </select>
          
          </nz-select>
        </nz-form-control>
      </nz-form-item>



      <!-- Sélecteur Entreprise -->
      <nz-form-item>
        <nz-form-label [nzFor]="'company_id'">Entreprise</nz-form-label>
        <nz-form-control nzHasFeedback>
          <nz-select
            id="company_id"
            [(ngModel)]="formData.company_id"
            name="company_id"
            nzPlaceHolder="Choisir un canal"
            [nzLoading]="isLoading"
            [disabled]="isLoading || isError"
            required
          >
            <nz-option
              *ngFor="let company of companies || []"
              [nzValue]="company.id"
              [nzLabel]="company.label"
            ></nz-option>
          </nz-select>

          <!-- Message d'erreur -->
          <div *ngIf="isError" class="error-message">
            Erreur lors du chargement des entreprises. Veuillez réessayer plus
            tard.
          </div>
        </nz-form-control>
      </nz-form-item>
  
      <!-- Boutons d'action -->
      <div class="form-buttons">
        <button nz-button nzType="primary" nzBlock (click)="submitForm()">
          Enregistrer
        </button>
        <button nz-button nzType="default" nzBlock (click)="cancel()">
          Annuler
        </button>
      </div>
    </form>
  </div>
</div>
